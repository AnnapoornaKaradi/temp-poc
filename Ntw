apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-egress-to-apiserver
  namespace: uat-aks-sinhchatapi
spec:
  podSelector:
    matchLabels:
      app: dapr-sidecar-check
  policyTypes:
    - Egress
  egress:
    - to:
        # Allow to the "kubernetes" ClusterIP (default is 10.0.0.1; verify with: kubectl get svc kubernetes -n default -o wide)
        - ipBlock:
            cidr: 10.0.0.1/32
      ports:
        - protocol: TCP
          port: 443
